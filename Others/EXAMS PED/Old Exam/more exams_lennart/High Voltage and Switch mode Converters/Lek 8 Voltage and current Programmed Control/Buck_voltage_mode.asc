Version 4
SHEET 1 1488 680
WIRE 96 -416 -144 -416
WIRE 240 -416 96 -416
WIRE 304 -416 240 -416
WIRE 448 -416 384 -416
WIRE 608 -416 448 -416
WIRE 720 -416 608 -416
WIRE 768 -416 720 -416
WIRE 944 -416 768 -416
WIRE 1072 -416 944 -416
WIRE 608 -400 608 -416
WIRE 720 -336 720 -416
WIRE 608 -288 608 -336
WIRE -144 -256 -144 -416
WIRE 944 -256 944 -416
WIRE 240 -240 240 -416
WIRE 448 -240 448 -416
WIRE 1072 -240 1072 -416
WIRE 608 -144 608 -208
WIRE 720 -144 720 -256
WIRE 720 -144 608 -144
WIRE 784 -144 720 -144
WIRE 720 -112 720 -144
WIRE 240 0 240 -176
WIRE 448 0 448 -176
WIRE 448 0 240 0
WIRE 720 0 720 -32
WIRE 720 0 448 0
WIRE 944 0 944 -176
WIRE 944 0 720 0
WIRE 1072 0 1072 -160
WIRE 1072 0 944 0
WIRE 240 48 240 0
WIRE 944 48 944 0
WIRE 0 128 -32 128
WIRE 80 128 0 128
WIRE 192 128 160 128
WIRE 608 128 576 128
WIRE 688 128 672 128
WIRE 784 128 784 -144
WIRE 784 128 768 128
WIRE -32 160 -32 128
WIRE 752 192 672 192
WIRE 784 192 784 128
WIRE 784 192 752 192
WIRE 576 208 576 128
WIRE 576 208 512 208
WIRE 608 208 576 208
WIRE 752 224 672 224
WIRE 768 224 752 224
WIRE 768 256 768 224
WIRE 960 272 960 224
WIRE -144 304 -144 -176
WIRE -80 304 -144 304
WIRE -32 304 -32 240
WIRE -32 304 -80 304
WIRE 240 304 240 144
WIRE 240 304 -32 304
WIRE 768 368 768 336
WIRE 960 384 960 352
FLAG 944 48 0
FLAG 768 -416 o
FLAG 96 -416 g
FLAG 0 128 gs
FLAG 768 368 0
FLAG 512 208 cont
FLAG 960 384 0
FLAG 960 224 tri
FLAG 752 192 o1
FLAG 752 224 ref
FLAG -80 304 ng
SYMBOL nmos 192 48 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M1
SYMATTR Value IRFHM830D
SYMBOL schottky 224 -176 M180
WINDOW 0 24 64 Invisible 2
WINDOW 3 24 0 Invisible 2
SYMATTR InstName D1
SYMATTR Value MBR735
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -144 -272 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vg
SYMATTR Value 28
SYMBOL ind 288 -400 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L
SYMATTR Value 50µH
SYMBOL cap 432 -240 R0
SYMATTR InstName C
SYMATTR Value 500µF
SYMATTR SpiceLine Rser=1m
SYMBOL res 928 -272 R0
SYMATTR InstName Ro
SYMATTR Value 3
SYMBOL res 704 -352 R0
SYMATTR InstName R1
SYMATTR Value 50k
SYMBOL res 704 -128 R0
SYMATTR InstName Rb
SYMATTR Value 10k
SYMBOL bv -32 144 R0
SYMATTR InstName Bpwm
SYMATTR Value V=(v(cont)>v(tri))*15
SYMBOL res 176 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rg
SYMATTR Value 5
SYMBOL Opamps\\opamp 640 144 M0
WINDOW 0 0 32 Invisible 2
SYMATTR InstName U1
SYMBOL voltage 768 240 M0
WINDOW 0 24 16 Invisible 2
SYMATTR InstName V1
SYMATTR Value 2.5
SYMBOL voltage 960 256 R0
WINDOW 0 24 16 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 0 {Ts/2} {Ts/2} 0 {Ts})
SYMBOL cap 592 -400 R0
SYMATTR InstName C3
SYMATTR Value 15n
SYMBOL res 592 -304 R0
SYMATTR InstName R3
SYMATTR Value 500
SYMBOL cap 672 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 40n
SYMBOL res 784 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL current 1072 -240 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value PULSE(0 -5 5m 1n 1n 8m 14m)
TEXT 320 328 Left 2 !.lib opamp.sub
TEXT 320 376 Left 2 !.param Ts=10us
TEXT 318 352 Left 2 !.tran 20m
TEXT 320 408 Left 2 !.ic v(o1)=0 v(cont)=0 v(o)=0
