\section{PCB building} \label{sec:pcb_building}
The building of the PCB has been done according to the test described in the following section. It has been divided into smaller tests, to validate that every part of the system works properly. It tests the control part, including the power supplies, optocouplers, drivers and sensors. For this test it has been chosen only to solder the buck leg of the converter to validate the design and discover potential faults. Before starting the test all vias, capacitors and test-points are soldered to assure connectivity. All components are named according to the schematic placed in Appendix \ref{ch:AppPCB}.  

\subsection{Power supplies} \label{sec:test_pwr_sup}
The purpose of the first test is to validate the different power supplies in the converter. For this test it's necessary to solder the in-TRACO and the $5V$ voltage regulator. The three LEDs and the resistors should also be soldered. Apply $5V$ at connector J4 and $12V$ at connector J2. The test is conducted by following table \ref{tab:test_pwr_sup}

\begin{table}[H]
	\centering
	\begin{tabular}{|>{\centering}p{1cm}|p{5.3cm}|p{4cm}|>{\centering}p{2cm}|}
		\hline
		\rowcolor{lightgray}\multicolumn{4}{|l|}{ \textbf{Test of power supplies}} \\ \hline
		\rowcolor{lightgray} \textbf{ID} & \textbf{Test} & \textbf{Test-points} & \textbf{Pass/Fail} \tabularnewline \hline
		1.1 & All LEDs must be lit & DS1-2-4 & Pass  \tabularnewline \hline
		1.2 & Measure $5V$ at low-voltage & 5V-LV \& GND-LV & Pass \tabularnewline \hline
		1.3 & Measure $12V$ at high voltage, low-side & 12V \& GND-in & Pass  \tabularnewline \hline
		1.4 & Measure $12V$ at output of in-TRACO & 12V-in \& L-in & Pass  \tabularnewline \hline
		1.5 & Measure $5V$ at the output of the voltage regulator & 5V-HV \& GND-sen & Pass  \tabularnewline \hline
	\end{tabular}
	\caption{Test of power supplies.}
	\label{tab:test_pwr_sup}
\end{table}

\subsection{Optocouplers} \label{sec:test_opto}
The second part of the test is to validate the optocouplers. This tests that the output of the optocoupler should follow the input. For this test it is necessary to solder opto1-2. Start the test by applying $5V$ at connector J4, $12V$ at connector J2 and a $5V-50kHz$ square waveform with $50\%$ duty-cycle at PWM1-2. 

\begin{table}[H]
	\centering
	\begin{tabular}{|>{\centering}p{1cm}|p{5.3cm}|p{4cm}|>{\centering}p{2cm}|}
		\hline
		\rowcolor{lightgray}\multicolumn{4}{|l|}{ \textbf{Test of optocouplers}} \\ \hline
		\rowcolor{lightgray} \textbf{ID} & \textbf{Test} & \textbf{Test-points} & \textbf{Pass/Fail} \tabularnewline \hline
		2.1 & Measure $5V-50kHz$ at the input of optocoupler 1 & Opto1-in \& GND-LV & Pass \tabularnewline \hline
		2.2 & Measure $12V-50kHz$ at the output of optocoupler 1 & Opto1-out \& L-in & Pass  \tabularnewline \hline
		2.3 & Measure $5V-50kHz$ at the input of optocoupler 2 & Opto2-in \& GND-LV & Pass  \tabularnewline \hline
		2.4 & Measure $12V-50kHz$ at the output of optocoupler 2 & Opto2-out \& GND-in & Pass  \tabularnewline \hline
	\end{tabular}
	\caption{Test of the optocouplers.}
	\label{tab:test_opto}
\end{table}

\subsection{Drivers} \label{sec:test_drivers}
The next part of the test consist of the drivers. For this it is necessary to solder drv1-2, M1-2 and the resistors R5-R10. Start the test by applying $12V$ at connector J2, $5V$ at J4 and a $5V-50kHz$ square waveform with $50\%$ duty-cycle at PWM1-2. The test is conducted by following table \ref{tab:test_drivers}.

\begin{table}[H]
	\centering
	\begin{tabular}{|>{\centering}p{1cm}|p{5.3cm}|p{4cm}|>{\centering}p{2cm}|}
		\hline
		\rowcolor{lightgray}\multicolumn{4}{|l|}{ \textbf{Test of drivers}} \\ \hline
		\rowcolor{lightgray} \textbf{ID} & \textbf{Test} & \textbf{Test-points} & \textbf{Pass/Fail} \tabularnewline \hline
		3.1 & Measure $5V-50kHz$ at the output of driver 1 & PWM1 \& L-in & Pass \tabularnewline \hline
		3.2 & Measure $5V-50kHz$ at the output of driver 2 & PWM2 \& GND-in & Pass  \tabularnewline \hline
	\end{tabular}
	\caption{Test of the drivers.}
	\label{tab:test_drivers}
\end{table}

\subsection{Sensors} \label{sec:test_sensors}
The last part of the control system test consist of the sensor circuits. For this test it's necessary to solder the input voltage sensor U2, the current sensor and the operational amplifier. Furthermore the resistors $R_{17}-R_{22}+R_{25}+R_{32}+R_{33}$ and capacitors $C_{17}+C_{22}$ should be soldered. Before testing a jumper should be placed between J5-2 and J5-3, to select the bandwidth of the current sensor to $80kHz$. The inductor, M1 and M3 should also be shorted to achieve a current flow through the current sensor. 

Attach a load resistor at $100\Omega$. With an input voltage at $10V$, this should correspond to a output current at $100mA$. Because of the differential offset in the current sensor, this should be equal to $2.6V$. After test 4.3, raise the input voltage to $20V$ for validation of linearity in the sensors.

\begin{table}[H]
	\centering
	\begin{tabular}{|>{\centering}p{1cm}|p{5cm}|p{4.3cm}|>{\centering}p{2cm}|}
		\hline
		\rowcolor{lightgray}\multicolumn{4}{|l|}{ \textbf{Test of sensors}} \\ \hline
		\rowcolor{lightgray} \textbf{ID} & \textbf{Test} & \textbf{Test-points} & \textbf{Pass/Fail} \tabularnewline \hline
		4.1 & Measure $10V$ at the input of the converter & Vin \& GND-in & Pass  \tabularnewline \hline
		4.2 & Measure $1V$ at the output of the voltage sensor & Vi-sen \& GND-sen & Pass \tabularnewline \hline
		4.3 & Measure $2.6V$ at the output of the current sensor & IL-sen-Raw \& GND-sen & Pass  \tabularnewline \hline
		4.4 & Measure $20V$ at the input of the converter & Vin \& GND-in & Pass  \tabularnewline \hline
		4.5 & Measure $2V$ at the output of the voltage sensor & Vi-sen \& GND-sen & Pass \tabularnewline \hline
		4.6 & Measure $2.7V$ at the output of the current sensor & IL-sen-Raw \& GND-sen & Pass  \tabularnewline \hline
	\end{tabular}
	\caption{Test of the sensors.}
	\label{tab:test_sensors}
\end{table}






 

